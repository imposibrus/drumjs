!function(){function t(e,n,a){var i=e,r=this,n=n||{},d={panelCount:16,rotateFn:"rotateX",interactive:!0,dail_w:20,dail_h:5,dail_stroke_color:"#999999",dail_stroke_width:1};for(var o in n)d[o]=n[o];if(d.transformProp=a,d.rotation=0,d.distance=0,d.last_angle=0,d.theta=360/d.panelCount,d.initselect=d.initselect|i.selectedIndex,!d.data){d.data=[];for(var l=0;l<i.children.length;l++)d.data.push(i.children[l].textContent)}e.style.display="none";var s=document.createElement("div");s.classList.add("drum-wrapper"),d.id?s.setAttribute("id",d.id):i.id?s.setAttribute("id","drum_"+i.id):i.getAttribute("name")&&s.setAttribute("id","drum_"+i.getAttribute("name"));var u=document.createElement("div");u.classList.add("inner"),s.appendChild(u);var c=document.createElement("div");c.classList.add("container"),u.appendChild(c);var h=document.createElement("div");if(h.classList.add("drum"),c.appendChild(h),!0===d.interactive){var p=DrumIcon.up(d);s.appendChild(p);var v=DrumIcon.down(d);s.appendChild(v),s.addEventListener("mouseover",function(){this.querySelector(".up").style.display="block",this.querySelector(".down").style.display="block"}),s.addEventListener("mouseout",function(){this.querySelector(".up").style.display="none",this.querySelector(".down").style.display="none"})}i.parentNode.insertBefore(s,i.nextSibling),d.radius=Math.round(h.offsetHeight/2/Math.tan(Math.PI/d.panelCount)),d.mapping=[];for(var f=0,l=0;l<d.panelCount&&d.data.length!=l;l++){var m=f;f>=d.panelCount/2&&(m=d.data.length-(d.panelCount-f)),f++;var g=new t.PanelModel(l,m,d);g.init(),d.mapping.push(g),h.appendChild(g.elem)}var C=function(t){t=t||d.rotation;var e=d.theta/2,n=((t+e)%360+360)%360;n-=n%d.theta;var a=(d.data.length-1)*d.theta;return n>a?t>0?a:0:n},x=function(){var t=C();for(var e in d.mapping)if(d.mapping[e].angle==t)return d.mapping[e]},w=function(t){for(var e,n=[],a=d.panelCount,i=d.panelCount/2,r=d.data.length,o=t.index,l=t.dataModel.index,s=l-i;s<=l+i-1;s++)e=s,s<0&&(e=r+s),s>r-1&&(e=s-r),n.push(e);var u=n.slice(i-o);n=u.concat(n.slice(0,a-u.length));for(var o=0;o<d.mapping.length;o++)d.mapping[o].update(n[o])},_=function(t){h.style[d.transformProp]="translateZ(-"+d.radius+"px) "+d.rotateFn+"("+d.rotation+"deg)";var e=x();if(e){var n=e.dataModel,a=i.selectedIndex;i.selectedIndex=n.index,t&&a!=n.index&&d.onChange&&d.onChange(n.index);for(var r=h.querySelectorAll("figure"),o=0;o<r.length;o++)r[o].classList.remove("active");e.elem.classList.add("active"),e.angle!=d.last_angle&&[0,90,180,270].indexOf(e.angle)>=0&&(d.last_angle=e.angle,w(e))}};if(r.setIndex=function(e){if(e==r.getIndex())return void _(!1);var n=Math.floor(e/d.panelCount),a=e-n*d.panelCount,i=new t.PanelModel(a,e,d);w(i),d.rotation=a*d.theta,_(!1)},r.getIndex=function(){return x()?x().dataModel.index:null},r.setIndex(d.initselect),r.updateItems=function(r){i.parentNode.removeChild(s),n.data=r;new t(e,n,a)},"undefined"!=typeof Hammer){var M,y,b=0;d.touch=new Hammer(s,{prevent_default:!0,no_mouseevents:!0}),d.touch.on("dragstart",function(t){d.distance=0,y=!0,M||(M=setInterval(function(t){d.rotation=(d.rotation+b+360)%360,b/=y?1.1:1.03,!y&&Math.pow(b,2)<.001?(clearInterval(M),M=null):!y&&Math.pow(b,2)<.5&&Math.pow(d.rotation-C(),2)<.1&&(d.rotation=C(),clearInterval(M),M=null,b=0),_(!0)},20))}),d.touch.on("drag",function(t){b+=-1*Math.round(t.gesture.deltaY-d.distance)/25,d.distance=t.gesture.deltaY}),d.touch.on("dragend",function(t){y=!1;var e=d.rotation-C();e>180&&(e=360-e),Math.pow(b,2)<.5&&(b=e/-20)})}d.interactive&&(p.addEventListener("click",function(t){var e=d.rotation+d.theta+1;d.rotation=C(e),_(!0)}),v.addEventListener("click",function(t){var e=d.rotation-d.theta-1;d.rotation=C(e),_(!0)}))}this.Drum=t}(),function(){var t=function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},e=function(e,n){var a=t("svg");a.setAttribute("width",e),a.setAttribute("height",n);var i=t("g");return a.appendChild(i),a},n=function(t){var e=document.createElement("div");e.setAttribute("class",t);var n=document.createElement("div");return e.appendChild(n),e},a=function(e){var n=t("path"),a={fill:"none",stroke:e.dail_stroke_color,"stroke-width":e.dail_stroke_width+"px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"};for(var i in a)n.setAttribute(i,a[i]);return n};this.Drum.DrumIcon={up:function(t){var i=t.dail_w,r=t.dail_h,d=e(i,r),o=a(t);o.setAttribute("d","m0,"+(r+t.dail_stroke_width)+"l"+i/2+",-"+r+"l"+i/2+","+r),d.firstChild.appendChild(o);var l=n("dial up");return l.firstChild.appendChild(d),l},down:function(t){var i=t.dail_w,r=t.dail_h,d=e(i,r),o=a(t);o.setAttribute("d","m0,-"+t.dail_stroke_width+"l"+i/2+","+r+"l"+i/2+",-"+r),d.firstChild.appendChild(o);var l=n("dial down");return l.firstChild.appendChild(d),l}}}(),function(){function t(t,e,n){this.index=t,this.dataModel=new function(t,e){this.data=t,this.index=e,this.getText=function(){return this.data[this.index]}}(n.data,e),this.init=function(){this.angle=n.theta*t,this.elem=document.createElement("figure"),this.elem.classList.add("a"+100*this.angle),this.elem.style[n.transformProp]=n.rotateFn+"("+-this.angle+"deg) translateZ("+n.radius+"px)",this.setText()},this.setText=function(){this.elem.innerHTML=this.dataModel.getText()},this.update=function(t){this.dataModel.index!=t&&(this.dataModel.index=t,this.setText())}}this.Drum.PanelModel=t}();